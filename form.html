<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>NaviMatch ‚Ä¢ Formulario</title>
  <link rel="icon" href="logo.svg" type="image/svg+xml">
  <link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin>
  <script src="https://cdn.tailwindcss.com"></script>

  <style>
    /* ===== Fondo navide√±o rojo ===== */
    body{
      background:
        radial-gradient(1200px 600px at 10% -10%, rgba(255, 220, 200, .08), transparent 60%),
        radial-gradient(1200px 600px at 110% 10%, rgba(255, 240, 220, .08), transparent 60%),
        linear-gradient(135deg, #7f1d1d 0%, #a11f24 35%, #b91c1c 65%, #7f1d1d 100%);
      color:#1f2937;
    }

    /* ===== Tarjeta ===== */
    .card{
      background:rgba(255,255,255,.97);
      box-shadow:0 20px 45px rgba(153,27,27,.22);
      border:1px solid rgba(120,30,30,.12);
      position:relative;
      border-radius:1.5rem;
    }

    /* ===== Bot√≥n principal ===== */
    .btn-primary{
      background:linear-gradient(135deg,#b91c1c,#dc2626);
      color:#fff; box-shadow:0 10px 24px rgba(185,28,28,.35);
    }
    .btn-primary:hover{filter:brightness(1.03);transform:translateY(-1px)}
    .btn-primary:active{transform:translateY(0)}

    /* ===== Segmented control accesible (m√≥vil/desktop) ===== */
    .seg{ display:grid; grid-template-columns: repeat(3, 1fr); gap:.5rem; }
    .seg label{
      position:relative; cursor:pointer; -webkit-tap-highlight-color:transparent; touch-action:manipulation;
    }
    .seg input{
      position:absolute; inset:0; width:100%; height:100%;
      opacity:0; appearance:none; /* recibe el tap/click */
    }
    .seg span{
      display:block; text-align:center; border-radius:0.75rem;
      border:1px solid #fecaca; padding:.65rem .75rem; user-select:none;
      transition: all .18s ease; background:#fff;
    }
    .seg input:focus-visible + span{ outline:2px solid #fca5a5; outline-offset:2px; }
    .seg input:active + span{ transform: translateY(1px); }
    .seg input:checked + span{
      background:linear-gradient(135deg,#dc2626,#b91c1c);
      color:#fff; border-color:transparent; box-shadow:0 8px 20px rgba(220,38,38,.35);
    }

    /* Mejoras m√≥viles */
    input,select,textarea,button{-webkit-tap-highlight-color:transparent}
  </style>
</head>
<body class="min-h-screen text-zinc-800 relative">
  <!-- Cabecera -->
  <header class="relative z-10 sticky top-0 backdrop-blur bg-white/80 border-b border-red-200">
    <div class="max-w-xl mx-auto px-4 py-3 flex items-center justify-between">
      <div class="flex items-center gap-2">
        <img src="logo.svg" alt="Logo NaviMatch" class="w-7 h-7 object-contain" />
        <h1 class="text-lg font-semibold tracking-tight text-zinc-900">NaviMatch</h1>
      </div>
      <span class="text-sm text-red-700 font-medium">Especial Navidad</span>
    </div>
  </header>

  <!-- Contenido -->
  <main class="relative z-10 max-w-xl mx-auto p-4 pb-28">
    <form id="naviForm" class="space-y-6">
      <section class="card p-6">
        <div class="space-y-6">

          <!-- Nombre + Edad -->
          <div class="grid grid-cols-1 sm:grid-cols-3 gap-4">
            <label class="block sm:col-span-2">
              <span class="text-xs text-zinc-600">Nombre</span>
              <input name="nombre" required autocomplete="name" placeholder="Tu nombre"
                class="mt-1 w-full rounded-2xl border border-red-100 bg-white px-4 py-3 text-base placeholder:text-zinc-400 focus:outline-none focus:ring-4 focus:ring-red-200 focus:border-red-500 transition">
            </label>
            <label class="block">
              <span class="text-xs text-zinc-600">Edad</span>
              <input name="edad" type="number" min="18" max="100" required placeholder="18+"
                class="mt-1 w-full rounded-2xl border border-red-100 bg-white px-4 py-3 text-base placeholder:text-zinc-400 focus:outline-none focus:ring-4 focus:ring-red-200 focus:border-red-500 transition">
            </label>
          </div>

          <!-- Preferencia -->
          <div>
            <span class="text-xs text-zinc-600">Preferencia</span>
            <div class="seg mt-2">
              <label>
                <input type="radio" name="preferencia" value="Hombre" required>
                <span>Hombre</span>
              </label>
              <label>
                <input type="radio" name="preferencia" value="Mujer">
                <span>Mujer</span>
              </label>
              <label>
                <input type="radio" name="preferencia" value="Ambas">
                <span>Ambas</span>
              </label>
            </div>
          </div>

          <!-- ¬øQu√© buscas? -->
          <div>
            <span class="text-xs text-zinc-600">¬øQu√© buscas?</span>
            <div class="seg mt-2">
              <label>
                <input type="radio" name="buscas" value="Amistad" required>
                <span>Amistad</span>
              </label>
              <label>
                <input type="radio" name="buscas" value="Rollo">
                <span>Rollo</span>
              </label>
              <label>
                <input type="radio" name="buscas" value="Pareja">
                <span>Pareja</span>
              </label>
            </div>
          </div>

          <!-- ¬øC√≥mo te definir√≠as? -->
          <label class="block">
            <span class="text-xs text-zinc-600">¬øC√≥mo te definir√≠as?</span>
            <textarea name="definicion" rows="3" placeholder="Breve descripci√≥n sobre ti"
              class="mt-1 w-full rounded-2xl border border-red-100 bg-white px-4 py-3 text-base placeholder:text-zinc-400 focus:outline-none focus:ring-4 focus:ring-red-200 focus:border-red-500 transition"></textarea>
          </label>

          <!-- ¬øQu√© estudias? -->
          <label class="block">
            <span class="text-xs text-zinc-600">¬øQu√© estudias?</span>
            <input name="estudios" placeholder="Tu formaci√≥n o a qu√© te dedicas"
              class="mt-1 w-full rounded-2xl border border-red-100 bg-white px-4 py-3 text-base placeholder:text-zinc-400 focus:outline-none focus:ring-4 focus:ring-red-200 focus:border-red-500 transition">
          </label>

          <!-- Algo que a√±adir (Preferencias) -->
          <label class="block">
            <span class="text-xs text-zinc-600">Algo que a√±adir (Preferencias)</span>
            <textarea name="preferencias" rows="3" placeholder="Planes ideales, l√≠mites, lenguaje del amor‚Ä¶"
              class="mt-1 w-full rounded-2xl border border-red-100 bg-white px-4 py-3 text-base placeholder:text-zinc-400 focus:outline-none focus:ring-4 focus:ring-red-200 focus:border-red-500 transition"></textarea>
          </label>

          <!-- ¬øLe has echado el ojo a alguien? -->
          <label class="block">
            <span class="text-xs text-zinc-600">¬øLe has echado el ojo a alguien?</span>
            <input name="crush" placeholder="Nombre o pista üòâ"
              class="mt-1 w-full rounded-2xl border border-red-100 bg-white px-4 py-3 text-base placeholder:text-zinc-400 focus:outline-none focus:ring-4 focus:ring-red-200 focus:border-red-500 transition">
          </label>

          <!-- Hobbies -->
          <label class="block">
            <span class="text-xs text-zinc-600">Hobbies</span>
            <textarea name="hobbies" rows="3" placeholder="Escribe libremente tus hobbies"
              class="mt-1 w-full rounded-2xl border border-red-100 bg-white px-4 py-3 text-base placeholder:text-zinc-400 focus:outline-none focus:ring-4 focus:ring-red-200 focus:border-red-500 transition"></textarea>
          </label>
        </div>
      </section>

      <p class="text-xs text-center text-white/90">
        Tus respuestas se enviar√°n por email y se guardar√°n solo en este dispositivo. üíå
      </p>

      <!-- Mensaje de √©xito -->
      <p id="okMsg" class="hidden mt-2 text-center text-green-700">
        ‚úÖ ¬°Tus respuestas se han enviado! Revisa tu correo.
      </p>
    </form>
  </main>

  <!-- Footer -->
  <footer class="fixed bottom-0 left-0 right-0 p-4 bg-white/80 backdrop-blur border-t border-red-200 z-10">
    <div class="max-w-xl mx-auto">
      <button form="naviForm" type="submit" id="submitBtn" class="btn-primary w-full h-12 rounded-2xl font-semibold">
        Enviar respuestas
      </button>
      <div class="mt-3 text-center text-sm text-red-600">
        üéÑ Feliz Navidad y mucho amor ‚ù§Ô∏è
      </div>
    </div>
  </footer>

  <script>
    /* === Config: tu Apps Script === */
    const AS_ENDPOINT = 'https://script.google.com/macros/s/AKfycbwiPNqnbXNjpAdJclskBE6_C4S1PiXmNqOC0Xn2FNP3Zrfe_TW3pQZm7cITbr3JNqxw/exec';

    // Scroll suave al primer campo inv√°lido (mejor UX en m√≥vil)
    document.getElementById('naviForm').addEventListener('submit', async (e)=>{
      const f = e.target;
      if (!f.checkValidity()) {
        e.preventDefault();
        const bad = f.querySelector(':invalid');
        if (bad) bad.scrollIntoView({behavior:'smooth', block:'center'});
        return;
      }

      e.preventDefault();
      const fd = new FormData(f);
      const data = {};
      fd.forEach((v,k)=> data[k] = v);

      // Construye x-www-form-urlencoded (evita preflight CORS)
      const params = new URLSearchParams();
      Object.entries(data).forEach(([k,v]) => params.append(k, String(v ?? '')));
      params.append('createdAt', String(Date.now()));
      params.append('origin', location.origin);

      const btn = document.getElementById('submitBtn');
      const okMsg = document.getElementById('okMsg');
      btn.disabled = true; btn.textContent = 'Enviando‚Ä¶';

      try{
        const res  = await fetch(AS_ENDPOINT, {
          method:'POST',
          headers:{ 'Content-Type':'application/x-www-form-urlencoded;charset=UTF-8' },
          body: params.toString()
        });
        const text = await res.text();
        // intenta parsear JSON {ok:true}
        let json = {};
        try { json = JSON.parse(text); } catch {}

        if (!res.ok || !json.ok) throw new Error(text || ('HTTP ' + res.status));

        btn.textContent = '¬°Enviado!';
        okMsg.classList.remove('hidden');
        // Redirige si quieres:
        // setTimeout(()=> window.location.href='app.html', 1000);
      } catch(err){
        console.error(err);
        alert('‚ùå No se pudo enviar el formulario. Int√©ntalo en unos minutos.');
        btn.disabled = false; btn.textContent = 'Enviar respuestas';
      }
    });
  </script>
</body>
</html>
